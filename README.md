# vsrobotics test task - service for proxy trafic to multiple backends

#Задание
Есть клиент и сервер системы распознавания речи, общающиеся по протоколу на основе Protobuf.
Тестовый клиент - в архиве, он умеет взять и отослать вавку на сервер.
Сервер - тоже в архиве, он умеет принимать коннекты и делать вид что он сервер распознавания =)

Предлагается реализовать прокси-балансировщик.
Прокси-балансировщик должен уметь принимать подключения от клиентов и раскидывать их на сервера, прозрачно для клиентов (то есть по тому же протоколу).
Балансировку нужно выполнять просто по количеству уже распределенных подключений (анализировать как-то иначе нагрузку - не требуется).

#Конфигурация сервера распознавания речи
Настроить прослушиваемый порт можно прописав необходимое значение в config.conf
Либо указав параметр запуска -listen_port=1234

Для запуска нескольких серверов можно использовать run_multiple_servers.bat задав в них начальный порт (initialPort) и конечнный порт (endPort) серверов
Данный скрип запустит несколько экземпляров сервера

#Конфигурация сервера распознавания эмоций
Прослушиваемый порт задается также, как в сервере распознавания речи

#Конфигурация тестового клиента
В конфиге используя параметры server_address, server_port задается адрес для подключения к серверу распознавания (балансировщику)
recognition_type указывает какой тип распознавания использовать: RecognizeSpeech - распознавание речи, RecognizeEmotion - распознавание эмоций, RecognizeSpeechAndEmotion распознавание и речи и эмоций
threads_num задает количество одновременных потоков распознавания
run_for_each_thread - множитель, влияющий на общее количество запусков тестов. Например, если задать threads_num = 50, run_for_each_thread = 2 то будет выполенено 100 тество в 50 потоков, или threads_num = 1, run_for_each_thread = 100, то будет выполенено 100 тестов в один поток
wav_filepath - путь к wav файлу (аудиозапись 8кГц 16бит PCM)

#Работа с тестовым клиентом
Приложение для тестирования в консоль выводит только информацию о результате завершения теста. Подробная информация пишется в logs/TestClient.<date>.log
